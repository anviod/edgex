- id: 5700b238-4cf3-4f3b-b175-b29c585e860f
  name: TMPW
  type: state
  enable: true
  priority: 0
  check_interval: 5s
  trigger_mode: always
  source:
    alias: ""
    channel_id: ""
    device_id: ""
    point_id: ""
    point_name: ""
  sources:
    - alias: t1
      channel_id: modbus-tcp-1
      device_id: slave-1
      point_id: dev1_temp
      point_name: Temperature
    - alias: t2
      channel_id: modbus-tcp-1
      device_id: slave-2
      point_id: dev2_temp
      point_name: Temperature
  trigger_logic: ""
  condition: t1 > 10 && t2>30
  expression: ""
  actions:
    - type: mqtt
      config:
        interval: 30s
        message: TMPW
        send_strategy: single
        topic: gateway/warning
    - type: device_control
      config:
        interval: 10s
        targets:
            - channel_id: modbus-tcp-1
              device_id: slave-1
              expression: bitset(1, value)
              point_id: dev1_pressure
              point_name: Pressure
              value: "1"
            - channel_id: modbus-tcp-1
              device_id: slave-2
              expression: bitset(4, value)
              point_id: dev2_pressure
              point_name: Pressure
              value: "1"
            - channel_id: modbus-tcp-1
              device_id: "3"
              point_id: S3-1
              value: "3"
  window:
    type: sliding
    size: 10s
    interval: ""
    aggr_func: avg
  state:
    duration: 10s
    count: 1
