# Industrial Edge Gateway

Industrial Edge Gateway æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å·¥ä¸šè¾¹ç¼˜è®¡ç®—ç½‘å…³ï¼Œæ—¨åœ¨è¿æ¥å·¥ä¸šç°åœºè®¾å¤‡ï¼ˆå—å‘ï¼‰ä¸äº‘ç«¯/ä¸Šå±‚åº”ç”¨ï¼ˆåŒ—å‘ï¼‰ï¼Œå¹¶æä¾›æœ¬åœ°è¾¹ç¼˜è®¡ç®—èƒ½åŠ›ã€‚é¡¹ç›®é‡‡ç”¨ Go è¯­è¨€å¼€å‘åç«¯ï¼ŒVue 3 å¼€å‘å‰ç«¯ç®¡ç†ç•Œé¢ã€‚

<div align="center">
  <img src="./industrial-edge-gateway/docs/img/é¦–é¡µç›‘æ§.png" width="800" />
</div>

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸ”Œ å—å‘é‡‡é›†åè®® (Southbound)

| åè®® | çŠ¶æ€ | è¯´æ˜ |
| :--- | :--- | :--- |
| **Modbus TCP / RTU / RTU Over TCP** | âœ… å·²å®ç° | å®Œæ•´æ”¯æŒï¼ŒåŸºäº `simonvetter/modbus`ï¼›**å¢å¼ºè§£ç å™¨**ï¼šæ”¯æŒ `int32`/`uint32`/`int16`/`uint16` ç­‰å¤šç§æ•´æ•°ç±»å‹è½¬æ¢ä¸è‡ªåŠ¨ç¼©æ”¾ |
| **BACnet IP** | âœ… å·²å®ç° | æ”¯æŒè®¾å¤‡å‘ç° (Who-Is/I-Am)ã€å¤šç½‘å£å¹¿æ’­ + å•æ’­å›é€€ï¼ˆå°Šé‡ I-Am æºç«¯å£ï¼‰ã€å¯¹è±¡æ‰«æä¸ç‚¹ä½è¯»å†™ã€æ‰¹é‡è¯»å¤±è´¥è‡ªåŠ¨å›é€€åˆ°å•è¯»ã€å¼‚å¸¸ç«¯å£å›é€€è‡³ 47808ã€è¯»è¶…æ—¶ä¸è‡ªåŠ¨æ¢å¤ä¼˜åŒ–ã€‚**æ–°å¢æœ¬åœ°æ¨¡æ‹Ÿå™¨æ”¯æŒ**ï¼šé’ˆå¯¹ Windows æœ¬åœ°è¿è¡Œçš„æ¨¡æ‹Ÿå™¨ï¼Œè‡ªåŠ¨å°è¯• localhost å•æ’­å‘ç°ã€‚ |
| **OPC UA Client** | âœ… å·²å®ç° | åŸºäº `gopcua/opcua` å®ç°ï¼Œæ”¯æŒè¯»å†™æ“ä½œã€è®¢é˜… (Subscription) ä¸ç›‘æ§ (Monitoring)ï¼Œæ”¯æŒæ–­çº¿è‡ªåŠ¨é‡è¿ |
| **Siemens S7** | ğŸš§ å¼€å‘ä¸­ | æ”¯æŒ S7-200Smart/1200/1500 ç­‰ (å®šåˆ¶å¼€å‘) |
| **EtherNet/IP (ODVA)** | ğŸš§ å¼€å‘ä¸­ | å¼€å‘å®ç° |
| **Mitsubishi MELSEC (SLMP)** | ğŸš§ å¼€å‘ä¸­ | å¼€å‘å®ç° |
| **Omron FINS (TCP/UDP)** | ğŸš§ å¼€å‘ä¸­ | å¼€å‘å®ç° |
| **DL/T645-2007** | ğŸš§ å¼€å‘ä¸­ | å¼€å‘å®ç° |

### â˜ï¸ åŒ—å‘ä¸ŠæŠ¥åè®® (Northbound)

| åè®® | çŠ¶æ€ | è¯´æ˜ |
| :--- | :--- | :--- |
| **MQTT** | âœ… å·²å®ç° | æ”¯æŒè‡ªå®šä¹‰ Topicã€Payload æ¨¡æ¿ æ”¯æŒæ‰¹é‡ç‚¹ä½æ˜ å°„ä¸åå‘æ§åˆ¶ï¼Œæä¾›æœåŠ¡ç«¯è¿è¡Œç›‘æ§ï¼ˆæ•°æ®ç»Ÿè®¡ï¼‰|
| **Sparkplug B** | âœ… å·²å®ç° | æ”¯æŒ NBIRTH, NDEATH, DDATA æ¶ˆæ¯è§„èŒƒ |
| **OPC UA Server** | âœ… å·²å®ç° | åŸºäº `awcullen/opcua` å®ç°ï¼Œæ”¯æŒå¤šç§è®¤è¯æ–¹å¼ï¼ˆåŒ¿å/ç”¨æˆ·å/è¯ä¹¦ï¼‰ï¼›**å®‰å…¨å¢å¼º**ï¼šå¯ç”¨ `Basic256Sha256` ç­–ç•¥ä¸è¯ä¹¦ä¿¡ä»»æœºåˆ¶ï¼›**åŒå‘äº’é€š**ï¼šæ”¯æŒå®¢æˆ·ç«¯å†™å…¥æ“ä½œï¼ˆäº‘ç«¯åæ§ï¼‰ï¼›æä¾›æœåŠ¡ç«¯è¿è¡Œç›‘æ§ï¼ˆå®¢æˆ·ç«¯æ•°/è®¢é˜…æ•°/å†™ç»Ÿè®¡ï¼‰ |

### ğŸ§  è¾¹ç¼˜è®¡ç®— & ç®¡ç†
*   **è§„åˆ™å¼•æ“**: å†…ç½®è½»é‡çº§è§„åˆ™å¼•æ“ï¼Œæ”¯æŒ `expr` è¡¨è¾¾å¼è¿›è¡Œé€»è¾‘åˆ¤æ–­å’Œè”åŠ¨æ§åˆ¶ã€‚
*   **æ—¥å¿—ç³»ç»Ÿ**:
    *   **å®æ—¶æ—¥å¿—**: æ”¯æŒ WebSocket å®æ—¶æ¨é€ï¼Œå…·å¤‡æš‚åœ/ç»§ç»­ã€æ—¥å¿—çº§åˆ«ç­›é€‰ï¼ˆINFO/WARN/ERRORç­‰ï¼‰ã€æ¸…å±åŠŸèƒ½ã€‚
    *   **å†å²æ—¥å¿—**: åˆ†é’Ÿçº§å¿«ç…§æŒä¹…åŒ–ï¼ˆbboltï¼‰ï¼Œæ”¯æŒæŒ‰æ—¥æœŸæŸ¥è¯¢ä¸ CSV å¯¼å‡ºã€‚
    *   **UIä½“éªŒ**: ç°ä»£åŒ–æ§åˆ¶å°é£æ ¼ï¼Œæ”¯æŒåˆ†é¡µæ˜¾ç¤ºï¼ˆæ¯é¡µ30è¡Œï¼‰ä¸å€’åºæ’åˆ—ã€‚
*   **å¯è§†åŒ–ç®¡ç†**:
    *   åŸºäº Vue 3 + Vuetify çš„ç°ä»£åŒ– UIã€‚
    *   **ç™»å½•å®‰å…¨**: æ”¯æŒ JWT è®¤è¯ã€**LDAP / AD åŸŸé›†æˆç™»å½•** (æ”¯æŒåœ¨ç³»ç»Ÿè®¾ç½®ä¸­åŠ¨æ€é…ç½®)ã€ç™»å½•å€’è®¡æ—¶ä¿æŠ¤ã€‚
    *   **è§†å›¾åˆ‡æ¢**: é€šé“åˆ—è¡¨æ”¯æŒå¡ç‰‡/åˆ—è¡¨è§†å›¾åˆ‡æ¢ã€‚
    *   **äº¤äº’å‡çº§**: é‡‡é›†é€šé“é…ç½®æ”¯æŒ **ID è‡ªåŠ¨ç”Ÿæˆ**ã€æ­£åˆ™æ ¡éªŒä¸åµŒå…¥å¼å¸®åŠ©æ–‡æ¡£ï¼Œæå‡é…ç½®æ•ˆç‡ã€‚
    *   **åŒ—å‘ç®¡ç†**: æä¾› OPC UAServer å®‰å…¨é…ç½®ï¼ˆç”¨æˆ·/è¯ä¹¦ï¼‰ä¸å®æ—¶è¿è¡ŒçŠ¶æ€ç›‘æ§çœ‹æ¿ã€‚
*   **é…ç½®ç®¡ç†**: é‡‡ç”¨æ¨¡å—åŒ– YAML é…ç½® (`conf/` ç›®å½•)ï¼Œæ”¯æŒçƒ­é‡è½½ï¼ˆéƒ¨åˆ†ï¼‰ã€‚
*   **ç¦»çº¿æ”¯æŒ**: å‰ç«¯ä¾èµ–å·²ä¼˜åŒ–ï¼Œæ”¯æŒå®Œå…¨ç¦»çº¿å±€åŸŸç½‘è¿è¡Œã€‚

## ğŸ§  è¾¹ç¼˜è®¡ç®—æŒ‡å— (Edge Computing Guide)

æœ¬ç½‘å…³å†…ç½®å¼ºå¤§çš„è¾¹ç¼˜è®¡ç®—å¼•æ“ï¼Œæ”¯æŒåŸºäºè§„åˆ™çš„æœ¬åœ°è”åŠ¨æ§åˆ¶ï¼Œç‰¹åˆ«é’ˆå¯¹å·¥ä¸šä½æ“ä½œï¼ˆBitwise Operationsï¼‰è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ã€‚

### 1. è¡¨è¾¾å¼è¯­æ³• (Expression Syntax)

è§„åˆ™å¼•æ“å…¼å®¹ `expr` è¯­è¨€ï¼Œå¹¶æ‰©å±•äº†å·¥ä¸šåœºæ™¯ä¸“ç”¨çš„è¯­æ³•ç³–ï¼š

#### åŸºç¡€å˜é‡
*   `v`: å½“å‰ç‚¹ä½çš„å®æ—¶å€¼ (Value)ã€‚

#### ä½æ“ä½œå¢å¼º
é’ˆå¯¹ PLC/æ§åˆ¶å™¨å¸¸è§çš„ä½é€»è¾‘ï¼Œæ”¯æŒ **1-based** (v.N) å’Œ **0-based** (v.bit.N) ä¸¤ç§é£æ ¼ï¼š

| è¯­æ³•/å‡½æ•° | ç´¢å¼•æ–¹å¼ | è¯´æ˜ | ç­‰æ•ˆå‡½æ•° |
| :--- | :--- | :--- | :--- |
| **`v.N`** | **1-based** | è·å–ç¬¬ N ä½ (ä»1å¼€å§‹) | `bitget(v, N-1)` |
| **`v.bit.N`** | **0-based** | è·å–ç¬¬ N ä½ (ç´¢å¼•ä»0å¼€å§‹) | `bitget(v, N)` |

**å†…ç½®ä½è¿ç®—å‡½æ•°**:
*   `bitget(v, n)`: è·å–ç¬¬ n ä½ (0/1)
*   `bitset(v, n)`: å°†ç¬¬ n ä½ç½® 1
*   `bitclr(v, n)`: å°†ç¬¬ n ä½ç½® 0
*   `bitand(a, b)`, `bitor(a, b)`, `bitxor(a, b)`, `bitnot(a)`
*   `bitshl(v, n)` (å·¦ç§»), `bitshr(v, n)` (å³ç§»)

### 2. æ™ºèƒ½å†™å…¥æœºåˆ¶ (Read-Modify-Write)

å½“å¯¹å¯„å­˜å™¨è¿›è¡Œä½æ“ä½œå†™å…¥æ—¶ï¼Œç½‘å…³é‡‡ç”¨ **RMW (è¯»-æ”¹-å†™)** æœºåˆ¶ï¼Œç¡®ä¿**ä¸ç ´åå…¶ä»–ä½çš„çŠ¶æ€**ã€‚

*   **åœºæ™¯**: ä»…ä¿®æ”¹ 16ä½ çŠ¶æ€å­—ä¸­çš„ç¬¬ 4 ä½ (v.4)ï¼Œä¿æŒç¬¬ 1-3 ä½ä¸å˜ã€‚
*   **æµç¨‹**:
    1.  **Read**: é©±åŠ¨è¯»å–å½“å‰ç‚¹ä½å®Œæ•´å€¼ (e.g., `0001`)ã€‚
    2.  **Modify**: æ ¹æ®å…¬å¼ `v.4` (ç½®ä½) è®¡ç®—æ–°å€¼ (`1001`)ã€‚
    3.  **Write**: å°†æ–°å€¼ `1001` å†™å…¥è®¾å¤‡ã€‚
*   **é…ç½®**: åœ¨åŠ¨ä½œ (Action) çš„å†™å…¥å…¬å¼ä¸­ç›´æ¥ä½¿ç”¨ `v.N` å³å¯è§¦å‘æ­¤æœºåˆ¶ã€‚

### 3. æ‰¹é‡æ§åˆ¶ (Batch Control)
æ”¯æŒå•æ¡è§„åˆ™è§¦å‘å¤šä¸ªè®¾å¤‡çš„åŠ¨ä½œï¼š
*   **å¤šç›®æ ‡**: åœ¨ UI ä¸­ä¸ºåŒä¸€ä¸ªåŠ¨ä½œæ·»åŠ å¤šä¸ª Target (è®¾å¤‡+ç‚¹ä½)ã€‚
*   **å¹¶è¡Œæ‰§è¡Œ**: å¼•æ“ä¼šè‡ªåŠ¨å¹¶å‘å¤„ç†æ‰€æœ‰ç›®æ ‡çš„å†™å…¥è¯·æ±‚ã€‚

### 4. UI è¾…åŠ©
*   **è¡¨è¾¾å¼æµ‹è¯•**: è§„åˆ™ç¼–è¾‘å™¨å†…ç½®â€œè®¡ç®—å™¨â€å›¾æ ‡ï¼Œå¯å®æ—¶æµ‹è¯•è¡¨è¾¾å¼ç»“æœã€‚
*   **å‡½æ•°æ–‡æ¡£**: ç‚¹å‡»â€œæŸ¥çœ‹å‡½æ•°æ–‡æ¡£â€å¯æµè§ˆå®Œæ•´æ”¯æŒçš„å‡½æ•°åˆ—è¡¨ä¸ç¤ºä¾‹ã€‚

### 5. å·¥ä½œæµå¼•æ“ (Workflow Engine)

è§„åˆ™å¼•æ“æ”¯æŒé«˜çº§å·¥ä½œæµç¼–æ’ï¼Œå…è®¸å®šä¹‰å¤æ‚çš„é¡ºåºæ§åˆ¶é€»è¾‘ï¼š

*   **Sequence (åºåˆ—)**: æŒ‰é¡ºåºæ‰§è¡Œä¸€ç³»åˆ—åŠ¨ä½œã€‚
    *   **ç‰¹æ€§**: å¦‚æœæŸä¸ªæ­¥éª¤å¤±è´¥ï¼ˆä¾‹å¦‚ Check åŠ¨ä½œä¸æ»¡è¶³ï¼‰ï¼Œæ•´ä¸ªåºåˆ—å°†ç«‹å³ç»ˆæ­¢ï¼Œåç»­æ­¥éª¤ä¸ä¼šæ‰§è¡Œã€‚è¿™æ˜¯å®ç°å®‰å…¨è”åŠ¨é€»è¾‘çš„å…³é”®ã€‚
*   **Delay (å»¶æ—¶)**: åœ¨åŠ¨ä½œä¹‹é—´æ’å…¥ç­‰å¾…æ—¶é—´ï¼ˆä¾‹å¦‚ `1s`, `500ms`ï¼‰ã€‚
*   **Check (æ£€æŸ¥)**: éªŒè¯æŸä¸ªæ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼ˆä¾‹å¦‚ `v > 50`ï¼‰ã€‚
    *   **On Fail (å¤±è´¥å¤„ç†)**: å¦‚æœæ£€æŸ¥å¤±è´¥ï¼Œå¯é…ç½®æ‰§è¡Œç‰¹å®šçš„â€œå¤±è´¥åŠ¨ä½œâ€ï¼ˆé€šå¸¸ç”¨äºæ—¥å¿—è®°å½•æˆ–å›é€€æ“ä½œï¼‰ã€‚
    *   **Rollback (å›é€€)**: ä¸€ç§ç‰¹æ®Šçš„åŠ¨ä½œç±»å‹ï¼Œé€šå¸¸ç”¨äº Check å¤±è´¥æ—¶æ¢å¤ç³»ç»ŸçŠ¶æ€ï¼ˆä¾‹å¦‚å…³é—­å·²æ‰“å¼€çš„é˜€é—¨ï¼‰ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

*   **åç«¯**: Go 1.25+
    *   Web æ¡†æ¶: [Fiber](https://github.com/gofiber/fiber)
    *   MQTT: [Paho MQTT](https://github.com/eclipse/paho.mqtt.golang)
    *   Modbus: [simonvetter/modbus](https://github.com/simonvetter/modbus)
    *   OPC UA: [gopcua/opcua](https://github.com/gopcua/opcua)
    *   è¡¨è¾¾å¼å¼•æ“: [expr](https://github.com/expr-lang/expr)
*   **å‰ç«¯**: Vue 3
    *   æ„å»ºå·¥å…·: Vite
    *   UI åº“: Vuetify 3
    *   è·¯ç”±: Vue Router 4
    *   HTTP å®¢æˆ·ç«¯: Axios (å¸¦è‡ªåŠ¨ Token æ³¨å…¥)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
*   [Go](https://go.dev/dl/) 1.25+
*   [Node.js](https://nodejs.org/) 16+ (ä»…ç”¨äºç¼–è¯‘å‰ç«¯)

### 1. å¯åŠ¨åç«¯

åç«¯æ”¯æŒé€šè¿‡ `-conf` å‚æ•°æŒ‡å®šé…ç½®ç›®å½•ï¼ˆé»˜è®¤ä¸º `./conf`ï¼‰ã€‚

```bash
# è·å–ä¾èµ–
go mod tidy

# è¿è¡Œç½‘å…³
go run cmd/main.go

# æˆ–è€…æŒ‡å®šé…ç½®ç›®å½•
go run cmd/main.go -conf ./conf/
```

### 2. ç¼–è¯‘å‰ç«¯

å‰ç«¯ä»£ç ä½äº `ui/` ç›®å½•ä¸‹ã€‚ç”Ÿäº§ç¯å¢ƒæ„å»ºåï¼Œåç«¯ä¼šè‡ªåŠ¨æ‰˜ç®¡ `ui/dist` é™æ€èµ„æºã€‚

```bash
cd ui

# å®‰è£…ä¾èµ– (å»ºè®®ä½¿ç”¨ npm æˆ– pnpm)
npm install

# ç¼–è¯‘ç”Ÿäº§ç¯å¢ƒä»£ç 
npm run build
```

è®¿é—® `http://localhost:8082` (é»˜è®¤ç«¯å£) å³å¯è¿›å…¥ç®¡ç†ç•Œé¢ã€‚  
é»˜è®¤è´¦å·è§ `conf/users.yaml`ï¼ˆadmin / passwd@123ï¼‰ã€‚

### 3. è®¾å¤‡æ‰«æä¸ç‚¹ä½ç®¡ç†ï¼ˆBACnetï¼‰
- é€šé“é¡µé¢è¿›å…¥è®¾å¤‡ â†’ ç‚¹ä½åˆ—è¡¨ â†’ ç‚¹å‡»â€œæ‰«æç‚¹ä½â€å³å¯ä»è®¾å¤‡è¯»å–å¯¹è±¡åˆ—è¡¨ï¼ˆå¹¶è¡Œå¯ŒåŒ– Vendor/Model/ObjectName/å½“å‰å€¼ï¼‰ã€‚
- å‹¾é€‰åç‚¹å‡»â€œæ·»åŠ é€‰å®šç‚¹ä½â€ï¼Œç³»ç»Ÿå°†ä»¥ `Type:Instance` åœ°å€å’Œåˆé€‚çš„æ•°æ®ç±»å‹ï¼ˆAI/AVâ†’float32ï¼ŒBinaryâ†’boolï¼ŒMultiStateâ†’uint16ï¼‰æ‰¹é‡æ³¨å†Œã€‚
- å‘ç°æµç¨‹ï¼šä¼˜å…ˆå•æ’­ WhoIsï¼ˆç›®æ ‡ IP/ç«¯å£ï¼‰ï¼Œå¤±è´¥åè¿›è¡Œå¤šç½‘å£å¹¿æ’­ï¼›ä»å¤±è´¥æ—¶ä½¿ç”¨é…ç½®åœ°å€å›é€€æ„é€ è®¾å¤‡å¹¶æ ‡è®°ä¸ºç¦»çº¿ã€‚
- æ‰«æç»“æœç»“æ„ï¼ˆç¤ºä¾‹å­—æ®µï¼‰ï¼š`device_id`, `ip`, `port`, `vendor_name`, `model_name`, `object_name`ã€‚
- è¯»å–ç­–ç•¥ï¼šæ‰¹é‡è¯»å–å¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°å•å±æ€§è¯»å–ï¼›è¯»å–/ä¼ è¾“å±‚è¶…æ—¶å·²æå‡ï¼ˆå…¸å‹ 10sï¼‰å¹¶é…åˆ 30s å†·å´çš„è‡ªåŠ¨æ¢å¤æœºåˆ¶ã€‚
- ç«¯å£ç­–ç•¥ï¼šå°Šé‡è®¾å¤‡ I-Am çš„æºç«¯å£è¿›è¡Œåç»­å•æ’­é€šä¿¡ï¼Œå¼‚å¸¸æ—¶å›é€€åˆ°æ ‡å‡†ç«¯å£ 47808ã€‚
- ç½‘å…³é€šè¿‡ WebSocket å°†æœ€æ–°å€¼å®æ—¶æ¨é€åˆ°å‰ç«¯ï¼Œåˆ—è¡¨å¯è§è´¨é‡æ ‡ç­¾ï¼ˆGood/Badï¼‰ä¸æ—¶é—´æˆ³ã€‚
- æœ¬æœºåŒæ—¶è¿è¡Œç½‘å…³ä¸æ¨¡æ‹Ÿå™¨æ—¶ï¼Œå¦‚é‡ 47808 ç«¯å£å†²çªï¼Œè¯·å°†ç½‘å…³ç»‘å®šåˆ°æŒ‡å®šç½‘å¡ IPï¼ˆä¾‹å¦‚ `192.168.3.106:47808`ï¼‰è€Œé `0.0.0.0:47808`ã€‚

### 4. OPC UA æœåŠ¡ç«¯æŒ‡å— (OPC UA Server Guide)

ç½‘å…³å†…ç½®é«˜æ€§èƒ½ OPC UA æœåŠ¡ç«¯ï¼Œæ”¯æŒæ ‡å‡† OPC UA å®¢æˆ·ç«¯ï¼ˆå¦‚ UaExpert, Prosysï¼‰ç›´æ¥è¿æ¥ï¼Œå®ç°æ•°æ®ç›‘æ§ä¸äº‘ç«¯åæ§ã€‚

- **å®‰å…¨è¿æ¥ (Security)**:
  - é»˜è®¤å¯ç”¨ `Basic256Sha256` (SignAndEncrypt) å®‰å…¨ç­–ç•¥ã€‚
  - **è¯ä¹¦ç®¡ç†**: è‡ªåŠ¨ç”Ÿæˆæœ‰æ•ˆæœŸ 10 å¹´çš„è‡ªç­¾åè¯ä¹¦ã€‚é¦–æ¬¡è¿æ¥æ—¶è‹¥æç¤ºè¯ä¹¦ä¸å¯ä¿¡ï¼Œè¯·åœ¨å®¢æˆ·ç«¯ä¿¡ä»»ç½‘å…³è¯ä¹¦ã€‚
  - **ç”¨æˆ·è®¤è¯**: æ”¯æŒ `admin` / `admin` (é»˜è®¤) ç™»å½•ï¼Œä¹Ÿæ”¯æŒåŒ¿åè®¿é—®ï¼ˆå¯é…ç½®ï¼‰ã€‚

- **åŒå‘äº’é€š (Bi-directional)**:
  - **æ•°æ®ä¸ŠæŠ¥**: æ‰€æœ‰å—å‘é€šé“é‡‡é›†çš„æ•°æ®è‡ªåŠ¨æ˜ å°„åˆ° OPC UA åœ°å€ç©ºé—´ (`Objects/Gateway/Channels/...`)ã€‚
  - **åå‘æ§åˆ¶**: æ”¯æŒå®¢æˆ·ç«¯ç›´æ¥ä¿®æ”¹ç‚¹ä½å€¼ï¼ˆWrite Attributeï¼‰ï¼Œç½‘å…³è‡ªåŠ¨é€ä¼ å†™å…¥æŒ‡ä»¤è‡³åº•å±‚è®¾å¤‡ï¼ˆå¦‚ Modbus å¯„å­˜å™¨ï¼‰ï¼Œå®ç°è¿œç¨‹æ§åˆ¶ã€‚

- **å®¢æˆ·ç«¯è¿æ¥ç¤ºä¾‹ (UaExpert)**:
  1. æ·»åŠ æœåŠ¡å™¨ URL: `opc.tcp://<Gateway_IP>:4840`
  2. é€‰æ‹©å®‰å…¨ç­–ç•¥ `Basic256Sha256 - Sign & Encrypt`ã€‚
  3. è®¤è¯æ–¹å¼é€‰æ‹© `User & Password`ï¼Œè¾“å…¥ `admin` / `admin`ã€‚
  4. è¿æ¥å¹¶æµè§ˆ `Objects` -> `Gateway` -> `Channels` æŸ¥çœ‹å®æ—¶æ•°æ®ã€‚


## ğŸ“¡ API æ¦‚è§ˆ
- æ‰€æœ‰ API éœ€è¦æºå¸¦è®¤è¯å¤´ï¼š`Authorization: Bearer <token>`ï¼ˆé»˜è®¤è´¦å·è§ `conf/users.yaml`ï¼‰ã€‚
- æ‰«æé€šé“è®¾å¤‡ï¼ˆå¤šç½‘å£å¹¿æ’­ + å•æ’­å›é€€ï¼‰  
  POST `/api/channels/:channelId/scan`
- æ‰«æè®¾å¤‡å¯¹è±¡ï¼ˆè®¾å¤‡çº§ï¼Œå¯¹ BACnet æ³¨å…¥ `device_id`/`ip`ï¼‰  
  POST `/api/channels/:channelId/devices/:deviceId/scan`
- è®¾å¤‡ç‚¹ä½ç®¡ç†  
  GET `/api/channels/:channelId/devices/:deviceId/points`  
  POST `/api/channels/:channelId/devices/:deviceId/points`  
  PUT `/api/channels/:channelId/devices/:deviceId/points/:pointId`  
  DELETE `/api/channels/:channelId/devices/:deviceId/points/:pointId`
- å®æ—¶æ•°æ®è®¢é˜…ï¼ˆWebSocketï¼‰  
  GET `/api/ws/values`
- è¾¹ç¼˜è®¡ç®—æ—¥å¿—ä¸å¯¼å‡º  
  GET `/api/edge/logs`  
  GET `/api/edge/logs/export`

## âš™ï¸ é…ç½®ç»“æ„

é…ç½®æ–‡ä»¶å·²æ‹†åˆ†ä¸ºæ¨¡å—åŒ– YAML æ–‡ä»¶ï¼Œä½äº `conf/` ç›®å½•ï¼š

*   `server.yaml`: HTTP æœåŠ¡å™¨ç«¯å£ã€é™æ€èµ„æºè·¯å¾„
*   `channels.yaml`: å—å‘é€šé“åŠè®¾å¤‡é…ç½®
*   `northbound.yaml`: åŒ—å‘ MQTT/SparkplugB é…ç½®
*   `edge_rules.yaml`: è¾¹ç¼˜è®¡ç®—è§„åˆ™é…ç½®
*   `system.yaml`: ç³»ç»Ÿçº§ç½‘ç»œé…ç½®
*   `users.yaml`: ç”¨æˆ·è´¦å·ç®¡ç†
*   `storage.yaml`: æ•°æ®åº“è·¯å¾„é…ç½®

ç¤ºä¾‹ï¼ˆBACnet é€šé“ç‰‡æ®µï¼‰ï¼š

```yaml
id: bac-test-1
protocol: bacnet-ip
config:
  interface_port: 47808
devices:
  - id: "2228316"
    enable: true
    interval: 2s
    config:
      device_id: 2228316
      ip: 192.168.3.106
      port: 47808
    points:
      - id: AnalogInput_0
        name: Temperature.Indoor
        address: AnalogInput:0
        datatype: float32
        readwrite: R
```

## ğŸ“… TODO / Roadmap

### æ ¸å¿ƒé©±åŠ¨å®Œå–„
- [x] **OPC UAClient**: å¯¹æ¥ `gopcua/opcua` å®ç°çœŸå®è¯»å†™ã€‚
- [ ] **Siemens S7**: å®ç° S7 åè®®çš„çœŸå® TCP é€šä¿¡ã€‚
- [ ] **EtherNet/IP**: å®ç° CIP/EIP åè®®æ ˆã€‚
- [ ] **å…¶ä»–é©±åŠ¨**: é€æ­¥æ›¿æ¢ Mitsubishi, Omron, DL/T645 çš„å¼€å‘å®ç°ã€‚

### åŒ—å‘å¢å¼º
- [x] **OPC UAServer**: å®ç°åŸºäº `awcullen/opcua` çš„æœåŠ¡ç«¯ï¼Œæ”¯æŒå¤šé‡è®¤è¯ï¼ˆåŒ¿å/ç”¨æˆ·å/è¯ä¹¦ï¼‰ä¸è¿è¡Œç›‘æ§ã€‚
- [ ] **HTTP Push**: æ”¯æŒé€šè¿‡ HTTP POST æ¨é€æ•°æ®åˆ°ç¬¬ä¸‰æ–¹ HTTP æœåŠ¡å™¨ã€‚

### ç³»ç»ŸåŠŸèƒ½
- [ ] **çœŸå®ç³»ç»Ÿç›‘æ§**: æ›¿æ¢ Dashboard ä¸­çš„æ¨¡æ‹Ÿ CPU/å†…å­˜æ•°æ®ä¸ºçœŸå®ç³»ç»Ÿè°ƒç”¨ (å¦‚ `gopsutil`)ã€‚
- [ ] **æ—¥å¿—æŒä¹…åŒ–**: æä¾›åŸºäºæ–‡ä»¶çš„æ—¥å¿—æŸ¥çœ‹å’Œä¸‹è½½åŠŸèƒ½ã€‚
- [ ] **æ•°æ®å­˜å‚¨**: å¢å¼ºæ—¶åºæ•°æ®å­˜å‚¨èƒ½åŠ›ï¼ˆç›®å‰ä»…å­˜å‚¨é…ç½®å’Œå°‘é‡çŠ¶æ€ï¼‰ã€‚

## ğŸ“¸ ç•Œé¢é¢„è§ˆ (Gallery)

### ğŸ“Š æ¦‚è§ˆä¸ç³»ç»Ÿ

#### ç™»å½•é¡µ
![ç™»å½•é¡µ](./industrial-edge-gateway/docs/img/ç™»å½•é¡µ.png)

#### é¦–é¡µç›‘æ§
![é¦–é¡µç›‘æ§](./industrial-edge-gateway/docs/img/é¦–é¡µç›‘æ§.png)

#### ç³»ç»Ÿè®¾ç½®
![ç³»ç»Ÿè®¾ç½®ç›¸å…³](./industrial-edge-gateway/docs/img/ç³»ç»Ÿè®¾ç½®ç›¸å…³.png)

### ğŸ”Œ å—å‘é‡‡é›† (BACnet / OPC UA)

#### é€šé“åˆ—è¡¨
![å—å‘é€šé“é‡‡é›†](./industrial-edge-gateway/docs/img/å—å‘é€šé“é‡‡é›†.png)

#### BACnet è®¾å¤‡å‘ç°
![BACnetè®¾å¤‡å‘ç°æ‰«æ](./industrial-edge-gateway/docs/img/BACnetè®¾å¤‡å‘ç°æ‰«æ.png)

#### BACnet è®¾å¤‡å‘ç°ç»“æœ
![BACnetè®¾å¤‡å‘ç°æ‰«æç»“æœ](./industrial-edge-gateway/docs/img/BACnetè®¾å¤‡å‘ç°æ‰«æç»“æœ.png)

#### BACnet ç‚¹ä½æ‰«æ
![BACç‚¹ä½å¯¹è±¡æ‰«æå‘ç°](./industrial-edge-gateway/docs/img/BACç‚¹ä½å¯¹è±¡æ‰«æå‘ç°.png)

#### OPC UAæ¨¡å‹æ‰«æ
![OPC UAè®¾å¤‡æ¨¡å‹æ‰«æ](./industrial-edge-gateway/docs/img/OPC_UA_è®¾å¤‡æ¨¡å‹æ‰«æ.png)

#### OPC UAæ¨¡å‹æ‰«æç»“æœ
![OPC UAè®¾å¤‡æ¨¡å‹æ‰«æç»“æœ](./industrial-edge-gateway/docs/img/OPC_UA_è®¾å¤‡æ¨¡å‹æ‰«æç»“æœ.png)

#### OPC UAæ•°æ®è®¢é˜…
![OPC UAè®¾å¤‡æ•°æ®è®¢é˜…](./industrial-edge-gateway/docs/img/OPC_UA_è®¾å¤‡æ•°æ®è®¢é˜….png)

#### OPC UAæ•°æ®è½¬æ¢
![OPC UAè®¾å¤‡æ•°æ®è½¬æ¢](./industrial-edge-gateway/docs/img/OPC_UA_è®¾å¤‡æ•°æ®è½¬æ¢.png)

### ğŸ§  è¾¹ç¼˜è®¡ç®—

#### è®¡ç®—ç›‘æ§
![è¾¹ç¼˜è®¡ç®—ç›‘æ§](./industrial-edge-gateway/docs/img/è¾¹ç¼˜è®¡ç®—ç›‘æ§.png)

#### è§„åˆ™é…ç½®
![è¾¹ç¼˜è®¡ç®—è§„åˆ™é…ç½®](./industrial-edge-gateway/docs/img/è¾¹ç¼˜è®¡ç®—è§„åˆ™é…ç½®.png)

#### è¾¹ç¼˜è®¡ç®—è§„åˆ™æ”¯æŒç±»å‹
![è¾¹ç¼˜è®¡ç®—è§„åˆ™æ”¯æŒç±»å‹](./industrial-edge-gateway/docs/img/è¾¹ç¼˜è®¡ç®—è§„åˆ™æ”¯æŒç±»å‹.png)

#### è¾¹ç¼˜è®¡ç®—è§„åˆ™æ”¯æŒåŠ¨ä½œç±»å‹
![è¾¹ç¼˜è®¡ç®—è§„åˆ™æ”¯æŒåŠ¨ä½œç±»å‹](./industrial-edge-gateway/docs/img/è¾¹ç¼˜è®¡ç®—è§„åˆ™æ”¯æŒåŠ¨ä½œç±»å‹.png)



#### è§„åˆ™å¸®åŠ©æ‰‹å†Œ
![è¾¹ç¼˜è®¡ç®—è§„åˆ™å¸®åŠ©æ‰‹å†Œ](./industrial-edge-gateway/docs/img/è¾¹ç¼˜è®¡ç®—è§„åˆ™é…ç½®å¸®åŠ©æ–‡æ¡£.png)

#### è§„åˆ™æ—¥å¿—
![è¾¹ç¼˜è®¡ç®—è§„åˆ™è¿è¡Œæ—¥å¿—æŸ¥è¯¢å¯¼å‡º](./industrial-edge-gateway/docs/img/è¾¹ç¼˜è®¡ç®—è§„åˆ™è¿è¡Œæ—¥å¿—æŸ¥è¯¢å¯¼å‡º.png)

### â˜ï¸ åŒ—å‘æ•°æ®

#### åŒ—å‘æ€»è§ˆ
![åŒ—å‘æ•°æ®å…±äº«æ€»è§ˆé¡µé¢](./industrial-edge-gateway/docs/img/åŒ—å‘æ•°æ®å…±äº«æ€»è§ˆé¡µé¢.png)

#### MQTT ç›‘æ§
![åŒ—å‘æ•°æ®å…±äº«MQTT è¿è¡Œç›‘æ§](./industrial-edge-gateway/docs/img/åŒ—å‘æ•°æ®å…±äº«MQTTè¿è¡Œç›‘æ§.png)

#### MQTT æ‰‹å†Œ
![åŒ—å‘æ•°æ®å…±äº«MQTT å¸®åŠ©æ‰‹å†Œ](./industrial-edge-gateway/docs/img/åŒ—å‘æ•°æ®å…±äº«MQTTå¸®åŠ©æ‰‹å†Œ.png)

## ğŸ“„ License

Mozilla Public License 2.0 (MPL-2.0)